(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{562:function(e,t,v){"use strict";v.r(t);var _=v(4),a=Object(_.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h2",{attrs:{id:"原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[e._v("#")]),e._v(" 原理")]),e._v(" "),v("p",[e._v("1.异步说明")]),e._v(" "),v("blockquote",[v("p",[e._v("Vue 实现响应式并不是数据发生变化之后 DOM 立即变化，而是按一定的策略进行 DOM 的更新")])]),e._v(" "),v("p",[e._v("2.事件循环说明")]),e._v(" "),v("p",[e._v("Vue 在修改数据后，视图不会立即更新，而是等同一事件循环中的所有数据变化完成后，再统一进行视图更新")]),e._v(" "),v("p",[e._v("事件循环：")]),e._v(" "),v("p",[e._v("第一个tick（本次更新循环）")]),e._v(" "),v("p",[e._v("1.首先修改数据，这是同步任务。同一事件循环的所有的同步任务都在主线程上执行，形成一个执行栈，此时还未涉及DOM")]),e._v(" "),v("p",[e._v("2.Vue开启一个异步队列，并缓冲在此事件循环中发生的所有数据变化。如果同一个watcher被多次触发，只会被推入队列中一次")]),e._v(" "),v("p",[e._v("第二个tick(‘下次更新循环’)")]),e._v(" "),v("p",[e._v("同步任务执行完毕，开始执行异步watcher队列的任务，更新DOM。Vue在内部尝试对异步队列使用原生的Promise.then和MessageChannel 方法，如果执行环境不支持，会采用 setTimeout(fn, 0) 代替")]),e._v(" "),v("p",[e._v("第三个tick（下次 DOM 更新循环结束之后）")]),e._v(" "),v("h2",{attrs:{id:"应用场景及原因"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#应用场景及原因"}},[e._v("#")]),e._v(" 应用场景及原因")]),e._v(" "),v("p",[e._v("1.在Vue生命周期的created()钩子函数进行DOM操作一定要放到Vue.nextTick()的回调函数中")]),e._v(" "),v("p",[e._v("在created()钩子函数执行的时候DOM 其实并未进行任何渲染，而此时进行DOM操作无异于徒劳，所以此处一定要将DOM操作的js代码放进Vue.nextTick()的回调函数中。与之对应的就是mounted()钩子函数，因为该钩子函数执行时所有的DOM挂载和渲染都已完成，此时在该钩子函数中进行任何DOM操作都不会有问题")]),e._v(" "),v("p",[e._v("2.在数据变化后要执行的某个操作，而这个操作需要使用随数据改变而改变的DOM结构的时候，这个操作都应该放进Vue.nextTick()的回调函数中")]),e._v(" "),v("p",[e._v("具体原因在Vue的官方文档中详细解释：")]),e._v(" "),v("blockquote",[v("p",[e._v("Vue 异步执行 DOM 更新。只要观察到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据改变。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作上非常重要。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。Vue 在内部对异步队列尝试使用原生的 "),v("code",[e._v("Promise.then")]),e._v("、"),v("code",[e._v("MutationObserver")]),e._v(" 和 "),v("code",[e._v("setImmediate")]),e._v("，如果执行环境不支持，则会采用 "),v("code",[e._v("setTimeout(fn, 0)")]),e._v(" 代替。")])])])}),[],!1,null,null,null);t.default=a.exports}}]);